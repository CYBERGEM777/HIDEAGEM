//
//  888    888 8888888 8888888b.  8888888888        d8888  .d8888b.  8888888888 888b     d888
//  888    888   888   888  "Y88b 888              d88888 d88P  Y88b 888        8888b   d8888
//  888    888   888   888    888 888             d88P888 888    888 888        88888b.d88888
//  8888888888   888   888    888 8888888        d88P 888 888        8888888    888Y88888P888
//  888    888   888   888    888 888           d88P  888 888  88888 888        888 Y888P 888
//  888    888   888   888    888 888          d88P   888 888    888 888        888  Y8P  888
//  888    888   888   888  .d88P 888         d8888888888 Y88b  d88P 888        888   "   888
//  888    888 8888888 8888888P"  8888888888 d88P     888  "Y8888P88 8888888888 888       888
// ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄
// ▄    ____ ______ ____                                      ▄                              ▄
// █   /    /      \    \   HIDEAGEM STEGANOGRAPHY PLATFORM   █                  .     .     █
// █  /___ /________\ ___\                                    █   .-.   .-.      '.___.'     █
// █  \    \        /    /  ASTRAL SOFTWARE FROM THE FUTURE   █  (_  \ /  _)     .'   `.     █
// █    \   \      /   /                                      █       |         :       :    █
// █      \  \    /  /      COPYRIGHT 2024 WWW.CYBERGEM.NET   █       |         :       :    █
// █        \ \  / /                                          █       |          `.___.'     █
// █           \/           LET'S DO COMPUTER STUFF ALL DAY   █                              █
// █                                                          █                              █
// █ ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀ █    ._____.         .--.      █
// █ MMMMMSSSSSSSSSSSSSSSSSSSSSSSSSSddMMMMMSSSSSSMSSSSSSSSSS; █      | |          /   _`.    █
// █ MMMMSSSSSSSSSSSSSSSSSMSSSSS; ;SSdMMMMSSSSSSMMSSSSSSSSSS, █      | |         (_) ( )     █
// █ MMSSSSSSSMSSSSSMSSSSMMMSS."-.-":MMMMMSSSSMMMMSSMSSSMMSS  █     _|_|_       '.    /      █
// █ MSSSSSSSMSSSSMMMSSMMMPTMM;"-/\":MMM^"     MMMSSMMMSSMM   █    '     '        `--'       █
// █ SSSSSSSMMSSMMMMMMMMMP-.MMM :  ;.;P       dMMMMMMMMMP'    █                              █
// █ SSMSSSMMMSMMMMMMMMMP   :M;`:  ;.'+"""t+dMMMMMMMMMMP      █                _             █
// █ MMMSSMMMMMMMMPTMMMM"""":P `.\// '    ""^^MMMMMMMP'       █      .--.     ' `:--.--.     █
// █ MMMMMMPTMMMMP="TMMMsg,      \/   db`c"  dMMMMMP"         █     (    )       |  |  |_    █
// █ MMMMMM  TMMM   d$$$b ^          /T$; ;-/TMMMP'  Let's    █    (_)  /        |  |  | )   █
// █ MMMMM; .^`M; d$P^T$$b          :  $$ ::MMMMP  hide some  █        (_,       |  |  |/    █
// █ MMMMMM   .-+d$$   $$$;         ;. $$ ;;MMMP,    Gems !   █                       (J     █
// █ MMMMMMb   _d$$$   $$$$         :$$$; :MMMMMMp.           █                              █
// █ MMMMMM"  " T$$$._.$$$;          T$P.'MMMSSSSSSb          █                _             █
// █ MMM`TMb   -")T$$$$$$P'       `._ ""  :MMSSSMMP'          █       __      ' `:--.--.     █
// █ MMM / \    '  "T$$P"           /     :MMMMMMP'           █  ___.'  '.___    |  |  |     █
// █ MMSb`. ;                      "      :MMMMMM'            █  ____________    |  |  |     █
// █ MMSSb_lSSSb.             .___.       MMMMMP ,d88b.d88b,  █                  |  |  | .., █
// █ MMMMSSSSSSSSb.                     .MMMMMM. 88888888888  █                        `--': █
// █ MMMMMMMMMMMSSSb                  .dMMMMMMMP `Y8888888Y'  █                              █
// █ MMMMMMMMMMMMMSS;               .dMMMMMMMMMM'  `Y888Y'    █         ...             _    █
// █ MMMMGEMMAMMMMb`;"-.          .dMMMMMMMMMMP'     `Y'      █         .':     \      /_)   █
// █ MMMMMMMMMMMMMMb:   `'--.___.dMMMMMMMMMPP'                █       .'         \    /`.    █
// █ MMMMMMMMMMMMMMMb;           dMMMMMMMMPPR                 █   `..'            \  /   ;   █
// █ ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄ █   .'`.             \/ __.'   █
// █                                                          █                              █
// █          ░░░░░░░░          ▒▒▒▒▒▒▒▒          ░░░░░░░░    █                              █
// █       ▓▓▓░░ ████████    ███▒▒ ▓▓▓▓▓▓▓▓    ▓▓▓░░ ████████ █                 `-.    .-'   █
// █    ▒▒▒▓▓ ░░ ██ ▒▒▒▒▒▒░░░██ ▒▒ ▓▓ ░░░░░░▒▒▒▓▓ ░░ ██+§¥µ██ █ .-"-._.-"-._.-     :  :      █
// █ ███▒▒ ▓▓ ░░░██ ▒▒ ▓▓▓░░ ██ ▒▒▒▓▓ ░░ ███▒▒ ▓▓ ░░░██$@¢¶██ █ .-"-._.-"-._.-   --:--:--    █
// █ ██ ▒▒ ▓▓▓▓▓▓███▒▒ ▓▓ ░░ ██████▓▓▓░░ ██ ▒▒ ▓▓▓▓▓▓████████ █                    :  :      █
// █ ██ ▒▒▒▒▒▒▒▒    ▒▒▒▓▓ ░░░░░░░░    ░░░██ ▒▒▒▒▒▒▒▒          █                 .-'    `-.   █
// █ ████████          ▓▓▓▓▓▓▓▓          ████████    CYBERGEM █                              █
// ▀                                                          ▀                              ▀
// ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀

#include "TERMINAL_UTILS.h"
#include "HIDEAGEM_CONSTANTS.h"

#include <cstdarg>
#include <iostream>

//
//    TERMINAL UTILS
//

namespace HIDEAGEM_CORE {

///
//    SIGNALS INTELLIGENCE

bool EXIT_SIGNAL = false;

void EXIT_SIGNAL_WATCHER( int signal ) { EXIT_SIGNAL = true; };

///
//    PRINTING

std::map<std::string, const char*> TERM_COLORS = {

    {"BLACK",          "\033[30m"},
    {"RED",            "\033[31m"},
    {"GREEN",          "\033[32m"},
    {"YELLOW",         "\033[33m"},
    {"BLUE",           "\033[34m"},
    {"MAGENTA",        "\033[35m"},
    {"CYAN",           "\033[36m"},
    {"WHITE",          "\033[37m"},
    {"BLACK_BRIGHT",   "\033[90m"},
    {"RED_BRIGHT",     "\033[91m"},
    {"GREEN_BRIGHT",   "\033[92m"},
    {"YELLOW_BRIGHT",  "\033[93m"},
    {"BLUE_BRIGHT",    "\033[94m"},
    {"MAGENTA_BRIGHT", "\033[95m"},
    {"CYAN_BRIGHT",    "\033[96m"},
    {"WHITE_BRIGHT",   "\033[97m"}
};


void WRITE_STD_OUT(const char* str, va_list args)
{
    vprintf(str, args);
}


void PRINT(const char* str, va_list args)
{
    printf( "%s", TERM_COLORS[ "WHITE_BRIGHT" ] );
    WRITE_STD_OUT( str, args );
    RESET_TERM_CURSOR(); // RESET CURSOR
    printf("\n\n");      // DOUBLE NEWLINE
}


void PRINT(const char* str, ...)
{
    va_list args;
    va_start(args, str);
    PRINT( str, args );
    va_end( args);
}


void PRINT_COLOR(const std::string& color, const char* str, va_list args)
{
    printf( "%s", TERM_COLORS[ color ] );
    WRITE_STD_OUT( str, args );
    RESET_TERM_CURSOR(); // RESET CURSOR
    printf("\n\n");      // DOUBLE NEWLINE
}


void PRINT_COLOR(const std::string& color, const char* str, ...)
{
    va_list args;
    va_start(args, str);
    printf( "%s", TERM_COLORS[ color ] );
    WRITE_STD_OUT( str, args );
    RESET_TERM_CURSOR(); // RESET CURSOR
    printf("\n\n");      // DOUBLE NEWLINE
    va_end( args);
}


void PRINT_SUCCESS(const char* str, ...)
{
    va_list args;
    va_start(args, str);
    PRINT_COLOR( "GREEN_BRIGHT", str, args );
    va_end( args);
}


void PRINT_WARNING(const char* str, ...)
{
    va_list args;
    va_start(args, str);
    PRINT_COLOR( "YELLOW_BRIGHT", str, args );
    va_end( args);
}


void PRINT_ERROR(const char* str, ...)
{
    va_list args;
    va_start(args, str);
    PRINT_COLOR( "RED_BRIGHT", str, args );
    va_end( args);
}


void PRINT_NO_NEWLINE(const char* str, ...)
{
    va_list args;
    va_start(args, str);
    printf( "%s", TERM_COLORS[ "WHITE_BRIGHT" ] );
    WRITE_STD_OUT( str, args );
    RESET_TERM_CURSOR(); // RESET CURSOR
    va_end( args);
}


void PRINT_SAME_LINE(const char* str, ...)
{
    va_list args;
    va_start(args, str);
    printf( "%s", TERM_COLORS[ "WHITE_BRIGHT" ] );
    WRITE_STD_OUT( str, args );
    va_end( args);
    RESET_TERM_CURSOR(); // RESET CURSOR

    // MOVE CURSOR TO BEGINNING OF LINE
    //
    // Injects newline to force terminal redraw
    // then moves cursor back up one line.
    printf("\033[K\r\n\x1B[1A");
}


void PRINT_SAME_LINE_COLOR(const std::string& color, const char* str, ...)
{
    va_list args;
    va_start(args, str);
    printf( "%s", TERM_COLORS[ color ] );
    WRITE_STD_OUT( str, args );
    va_end( args);
    RESET_TERM_CURSOR(); // RESET CURSOR

    // MOVE CURSOR TO BEGINNING OF LINE
    //
    // Injects newline to force terminal redraw
    // then moves cursor back up one line.
    printf("\033[K\r\n\x1B[1A");
}


void HIDE_TERM_CURSOR()
{
    printf("\033[?25l");
}


void SHOW_TERM_CURSOR()
{
    printf("\033[?25h");
}


void RESET_TERM_CURSOR()
{
    printf("\033[0m");
}


bool STDIN_YES_OR_NO()
{
    auto PRINT_PROMPT = []()
    {
        printf("\033[97m\033[92myes\033[97m / \033[91mno\033[97m => ");
    };
    
    PRINT_PROMPT(); // Yes / No

    SHOW_TERM_CURSOR(); // Show cursor

    bool b_yes = false;

    do
    {
        int ch = getchar();

        b_yes = ch == 'y';

        if ( ch == '\n' )
        {
            PRINT_PROMPT();

            continue;
        }

        break;
    }
    while ( true );

    HIDE_TERM_CURSOR(); // Hide cursor

    std::cout << "\n"; // Double newline

    return b_yes;
}


void PRINT_SPLASH_SCREEN()
{
    HIDE_TERM_CURSOR();
    RESET_TERM_CURSOR();

    //  _    _ _____ _____  ______          _____ ______ __  __ 
    // | |  | |_   _|  __ \|  ____|   /\   / ____|  ____|  \/  |
    // | |__| | | | | |  | | |__     /  \ | |  __| |__  | \  / |
    // |  __  | | | | |  | |  __|   / /\ \| | |_ |  __| | |\/| |
    // | |  | |_| |_| |__| | |____ / ____ \ |__| | |____| |  | |
    // |_|  |_|_____|_____/|______/_/    \_\_____|______|_|  |_|
    //
    //                      WWW.CYBERGEM.NET
    //                      ____ ______ ____
    //                     /    /      \    \
    //                    /___ /________\ ___\
    //                    \    \        /    /
    //                      \   \      /   /
    //                        \  \    /  /
    //                          \ \  / /
    //                             \/
    //
    //

    printf("\033[35m  _    _ _____ _____  ______          \033[92m_____ \033[94m______\033[91m __  __ \033[97m\n");
    printf("\033[35m | |  | |_   _|  __ \\|  ____|\033[97m   /\\   \033[92m/ ____|\033[94m  ____\033[91m|  \\/  |\033[97m\n");
    printf("\033[35m | |__| | | | | |  | | |__  \033[97m   /  \\ \033[92m| |  __\033[94m| |__  \033[91m| \\  / |\033[97m\n");
    printf("\033[35m |  __  | | | | |  | |  __| \033[97m  / /\\ \\\033[92m| | |_ |\033[94m  __| \033[91m| |\\/| |\033[97m\n");
    printf("\033[35m | |  | |_| |_| |__| | |____\033[97m / ____ \\ \033[92m|__| |\033[94m |____\033[91m| |  | |\033[97m\n");
    printf("\033[35m |_|  |_|_____|_____/|______\033[97m/_/    \\_\\\033[92m_____|\033[94m______\033[91m|_|  |_|\033[97m\n");

    std::string version = "  v" + std::to_string( HIDEAGEM_VERSION_MAJOR ) +
        "." + std::to_string( HIDEAGEM_VERSION_MAJOR ) + " " + HIDEAGEM_VERSION_NAME;

    const int space_add = 21 - (int)version.size();

    for (int i = 0; i < space_add; ++i)
    {
        version += " ";
    }

    std::cout << "                      \033[92m____ ______ ____";

    std::cout << "\n\033[97m" << version << "\033[92m/    /      \\    \\\033[97m  WWW.HIDEA\033[92mG\033[94mE\033[31mM\033[97m.COM";

    printf("\033[92m"); // Bright Green

	printf(R"(
                    /___ /________\ ___\
)");

    printf("\033[94m"); // Bright Blue

	printf(R"(                    \    \        /    /
                      \   \      /   /
)");

    printf("\033[91m"); // Bright Red

	printf(R"(                        \  \    /  /
                          \ \  / /
                             \/

)");

    SHOW_TERM_CURSOR();
    RESET_TERM_CURSOR(); // Reset term cursor colors
}

}; // namespace HIDEAGEM_CORE

